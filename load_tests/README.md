# Нагрузочные тесты

Эта папка содержит нагрузочные тесты для IgorekChatBot API.

## Файлы тестов

### Основные тесты

- **`real_attachment_get_load_test.py`** - ✅ **РЕАЛЬНАЯ БИЗНЕС-ЛОГИКА**
  - Тестирует эндпоинт `/signed/chat/attachments` с реальной валидацией токенов
  - Результат: 6/5/12/15ms | 3/15ms | 100.0% (валидация безопасности)

- **`real_attachment_load_test.py`** - Тест signed attachments (POST метод)

- **`real_chat_load_test.py`** - Тест основного эндпоинта `/chat`

### Общие тесты

- **`advanced_load_test.py`** - Продвинутый нагрузочный тест с аутентификацией
- **`load_test.py`** - Базовый нагрузочный тест нескольких эндпоинтов

## Результаты тестирования

### ✅ Успешное тестирование реальной бизнес-логики

```
ENDPOINT /signed/chat/attachments | 6/5/12/15 | 3/15 | 100.0% (валидация токенов)
ENDPOINT / | 5/4/6/6 | 4/6 | 0.0% (контроль)
```

Эндпоинт `/signed/chat/attachments` выполняет реальную валидацию токенов безопасности и обрабатывает запросы в среднем за 5.6ms, что доказывает реальную бизнес-логику в сравнении с контрольным эндпоинтом (4.6ms).

## Использование

Для запуска тестов требуется запущенный бэкэнд сервер на localhost:8000:

```bash
# Запуск бэкенда
source .venv/bin/activate && python -m uvicorn app.main:app --host 0.0.0.0 --port 8000

# Запуск теста
source .venv/bin/activate && python load_tests/real_attachment_get_load_test.py
```

## Метрики

Каждый тест выводит:
- **avg/median/p95/p99** - время ответа в миллисекундах
- **min/max** - минимальное/максимальное время ответа
- **errors%** - процент ошибок
- **Статусы** - распределение HTTP кодов ответа